(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{4762:(e,t,s)=>{Promise.resolve().then(s.bind(s,6743))},6743:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(5155),o=s(2115),a=s(7982),n=s(7058),d=s(4565),i=s(6046);function l(){let[e,t]=(0,o.useState)([]),[s,l]=(0,o.useState)(!0),[u,c]=(0,o.useState)(""),[b,m]=(0,o.useState)(null),[x,h]=(0,o.useState)(""),[g,p]=(0,o.useState)(null),f=(0,d.xI)(),v=(0,i.useRouter)();(0,o.useEffect)(()=>{let e=(0,d.hg)(f,async e=>{if(!e){c("You need to be logged in to view your books."),l(!1);return}p(e);try{let s=(0,n.rJ)(a.db,"books"),r="/users/".concat(e.uid),o=(0,n.P)(s,(0,n._M)("user","==",r)),d=(await (0,n.GG)(o)).docs.map(e=>({id:e.id,...e.data()}));t(d),c("")}catch(e){console.error("Error fetching books:",e),c("Failed to load books. Please try again later.")}finally{l(!1)}});return()=>e()},[f]);let k=e=>{m(e),h(e.isbn)},w=async()=>{if(b)try{let e=(0,n.H9)(a.db,"books",b.id);await (0,n.mZ)(e,{isbn:x}),t(e=>e.map(e=>e.id===b.id?{...e,isbn:x}:e)),m(null),h("")}catch(e){console.error("Error updating book:",e),c("Failed to update book. Please try again later.")}};return s?(0,r.jsx)("p",{children:"Loading..."}):u?(0,r.jsx)("p",{className:"text-red-500",children:u}):(0,r.jsx)("section",{className:"bg-white min-h-screen p-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"My Books"}),(0,r.jsx)("button",{onClick:()=>{v.push("./book")},className:"mb-4 rounded-md border border-blue-600 bg-blue-600 px-6 py-3 text-sm font-medium text-white transition hover:bg-transparent hover:text-blue-600 focus:outline-none focus:ring active:text-blue-500",children:"Add Book"}),0===e.length?(0,r.jsx)("p",{children:"No books found."}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,r.jsxs)("div",{className:"p-4 border rounded-md shadow-sm hover:shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),(0,r.jsxs)("p",{className:"text-gray-600",children:["ISBN: ",e.isbn]}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm",children:["Added on:"," ",e.add_date?new Date(1e3*e.add_date.seconds).toLocaleDateString():"Unknown"]}),(null==b?void 0:b.id)===e.id?(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("input",{type:"text",value:x,onChange:e=>h(e.target.value),className:"mt-1 w-full rounded-md border-gray-200 bg-white text-sm text-gray-700 shadow-sm"}),(0,r.jsx)("button",{onClick:w,className:"mt-2 rounded-md border border-green-600 bg-green-600 px-6 py-2 text-sm font-medium text-white transition hover:bg-transparent hover:text-green-600 focus:outline-none focus:ring active:text-green-500",children:"Save"}),(0,r.jsx)("button",{onClick:()=>m(null),className:"mt-2 ml-2 rounded-md border border-red-600 bg-red-600 px-6 py-2 text-sm font-medium text-white transition hover:bg-transparent hover:text-red-600 focus:outline-none focus:ring active:text-red-500",children:"Cancel"})]}):(0,r.jsx)("button",{onClick:()=>k(e),className:"mt-4 rounded-md border border-blue-600 bg-blue-600 px-6 py-2 text-sm font-medium text-white transition hover:bg-transparent hover:text-blue-600 focus:outline-none focus:ring active:text-blue-500",children:"Edit"})]},e.id))})]})})}},7982:(e,t,s)=>{"use strict";s.d(t,{db:()=>i,j:()=>d});var r=s(9904),o=s(4565),a=s(7058);let n=(0,r.Wp)({apiKey:"AIzaSyABs8ZIhbsAPFm8PqfE-v_kqVFvM8Fv4kU",authDomain:"frontend-app-wsei.firebaseapp.com",projectId:"frontend-app-wsei",storageBucket:"frontend-app-wsei.firebasestorage.app",messagingSenderId:"193371263244",appId:"1:193371263244:web:6ba3fa9cf180e5079bb929",measurementId:"G-7M1R3618T9"}),d=(0,o.xI)(n),i=(0,a.aU)(n)},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[697,992,512,778,441,517,358],()=>t(4762)),_N_E=e.O()}]);