(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{7511:(e,t,s)=>{Promise.resolve().then(s.bind(s,7050))},7050:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(5155),a=s(2115),i=s(9606),l=s(4565),d=s(7982),o=s(7058),m=s(6046);function u(){var e,t,s,u,n;let c=(0,l.xI)(),x=(0,m.useRouter)(),[p,h]=(0,a.useState)(null),[g,b]=(0,a.useState)(!0),[y,f]=(0,a.useState)(""),{register:N,setValue:j,handleSubmit:w,formState:{errors:v}}=(0,i.mN)({defaultValues:{email:"",displayName:"",photoURL:"",street:"",city:"",zipCode:""}});(0,a.useEffect)(()=>{let e=(0,l.hg)(c,async e=>{if(e){h(e);try{let t=await (0,o.x7)((0,o.H9)(d.db,"users",e.uid));if(t.exists()){let e=t.data().address||{};j("street",e.street||""),j("city",e.city||""),j("zipCode",e.zipCode||"")}j("email",e.email||""),j("displayName",e.displayName||""),j("photoURL",e.photoURL||"")}catch(e){console.error("Error fetching address:",e),f("Failed to load user address.")}}else x.push("/user/login");b(!1)});return()=>e()},[c,x,j]);let C=async e=>{if(!p){f("You need to be logged in to update your profile.");return}try{await (0,l.r7)(p,{displayName:e.displayName,photoURL:e.photoURL}),await (0,o.BN)((0,o.H9)(d.db,"users",p.uid),{address:{street:e.street,city:e.city,zipCode:e.zipCode}}),f(""),x.push("/")}catch(e){console.error("Error updating profile:",e),f("Failed to update profile.")}};return g?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:(0,r.jsx)("p",{className:"text-gray-500 text-xl",children:"Loading..."})}):(0,r.jsx)("section",{className:"bg-gray-100 min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-8 shadow-lg rounded-lg w-full max-w-lg",children:[(0,r.jsx)("h1",{className:"text-3xl font-semibold text-gray-900 mb-6 text-center",children:"Edit Profile"}),y&&(0,r.jsx)("div",{className:"text-red-700 bg-red-100 border border-red-400 p-4 rounded-md mb-4",children:y}),(0,r.jsxs)("form",{onSubmit:w(C),className:"grid grid-cols-1 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700",children:"Display Name"}),(0,r.jsx)("input",{...N("displayName",{required:"Display name is required"}),type:"text",id:"displayName",className:"mt-1 w-full rounded-lg border-gray-300 bg-white text-sm text-gray-700 shadow-sm focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("p",{className:"text-sm text-red-500",children:null===(e=v.displayName)||void 0===e?void 0:e.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsx)("input",{...N("email"),type:"email",id:"email",readOnly:!0,className:"mt-1 w-full rounded-lg border-gray-200 bg-gray-100 text-sm text-gray-700 shadow-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"photoURL",className:"block text-sm font-medium text-gray-700",children:"Photo URL"}),(0,r.jsx)("input",{...N("photoURL",{required:"Photo URL is required"}),type:"url",id:"photoURL",className:"mt-1 w-full rounded-lg border-gray-300 bg-white text-sm text-gray-700 shadow-sm focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("p",{className:"text-sm text-red-500",children:null===(t=v.photoURL)||void 0===t?void 0:t.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700",children:"Street"}),(0,r.jsx)("input",{...N("street",{required:"Street is required"}),type:"text",id:"street",className:"mt-1 w-full rounded-lg border-gray-300 bg-white text-sm text-gray-700 shadow-sm focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("p",{className:"text-sm text-red-500",children:null===(s=v.street)||void 0===s?void 0:s.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),(0,r.jsx)("input",{...N("city",{required:"City is required"}),type:"text",id:"city",className:"mt-1 w-full rounded-lg border-gray-300 bg-white text-sm text-gray-700 shadow-sm focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("p",{className:"text-sm text-red-500",children:null===(u=v.city)||void 0===u?void 0:u.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"ZIP Code"}),(0,r.jsx)("input",{...N("zipCode",{required:"ZIP Code is required"}),type:"text",id:"zipCode",className:"mt-1 w-full rounded-lg border-gray-300 bg-white text-sm text-gray-700 shadow-sm focus:ring-blue-500 focus:border-blue-500"}),(0,r.jsx)("p",{className:"text-sm text-red-500",children:null===(n=v.zipCode)||void 0===n?void 0:n.message})]}),(0,r.jsx)("button",{type:"submit",className:"w-full rounded-lg bg-blue-600 px-4 py-2 text-white text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-200",children:"Save Changes"})]})]})})}},7982:(e,t,s)=>{"use strict";s.d(t,{db:()=>o,j:()=>d});var r=s(9904),a=s(4565),i=s(7058);let l=(0,r.Wp)({apiKey:"AIzaSyABs8ZIhbsAPFm8PqfE-v_kqVFvM8Fv4kU",authDomain:"frontend-app-wsei.firebaseapp.com",projectId:"frontend-app-wsei",storageBucket:"frontend-app-wsei.firebasestorage.app",messagingSenderId:"193371263244",appId:"1:193371263244:web:6ba3fa9cf180e5079bb929",measurementId:"G-7M1R3618T9"}),d=(0,a.xI)(l),o=(0,i.aU)(l)}},e=>{var t=t=>e(e.s=t);e.O(0,[697,992,512,778,533,441,517,358],()=>t(7511)),_N_E=e.O()}]);